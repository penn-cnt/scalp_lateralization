
<!DOCTYPE html>
<html>
    <style>
        .top-buffer { margin-top:20px; }
    </style>
<body style="background-color:D3D3D3;">
<body>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">    
  </body>
</html>


<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Epilepsy Lateralization </title>
    <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/starter-template/">

    <!-- MathJax -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Bootstrap core CSS -->
    <link href="../../dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="starter-template.css" rel="stylesheet">
  </head>

  <body>
      
<header>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top" style = "background-color: #011F5b;">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#">Calculator <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://academic.oup.com/braincomms/article/6/5/fcae284/7739025">Publication</a>
          </li>
          
           </div>
    </nav>
        
</header>
    <main role="main" class="container text-center ">
       <br>
        <h1 class="mt-5" style="font-size: 24px;"> Interictal scalp EEG spike asymmetry to predict seizure onset zone laterality in temporal lobe epilepsy </h1>
     
      </main>
      
  <div class="row mt-4"></div>
      
    <div class="container">
        <!-- Row with two columns -->
        <div class="row top-buffer">
            
            <!-- Left Column for Inputs -->
            <div class="col-md-6">
                <div class="row top-buffer">
                    <div class="col-md">
                        <label for="LSR"> Number of spikes in the LEFT hemisphere: </label>
                        <input id="LSR" type="number" value="0" min="0" required>
                        <span class="validity"></span>
                    </div>
                </div>

                <div class="row top-buffer">
                    <div class="col-md">
                        <label for="RSR"> Number of spikes in the RIGHT hemisphere: </label>
                        <input id="RSR" type="number" value="0" min="0" required>
                    </div>
                </div>

                <div class="row top-buffer">
                    <div class="col-md">
                        <button type="button" class="btn btn-dark" onclick="myFunction()"> Submit </button>
                    </div>
                </div>
            </div>
            
            <!-- Right Column for Results -->
            <div class="col-md-6">
                <div class="row top-buffer">
                    <div class="col-md"> 
                        <h5> Spike rate asymmetry index: <p class="text-nowrap" id="ai"> </p> </h5>
                    </div>
                </div>

                <div class="row top-buffer">
                    <div class="col-md"> 
                        <h5> Probability of a left-sided seizure onset zone according to Model 1: <p class="text-nowrap" id="demo_left"> </p></h5>
                    </div>
                </div>

                <div class="row top-buffer">
                    <div class="col-md"> 
                        <h5> Probability of a right-sided seizure onset zone according to Model 2: <p class="text-nowrap" id="demo_right"> </p> </h5>
                    </div>
                </div>
            </div>
        </div>

<div class="row mt-4"></div>
        
        <div class="row top-buffer">
            <div class="col-md"> 
                <h4> Calculator Information:</h4>
            </div>
        </div>
        
        <div class="row top-buffer">
            <div class="col-md"> 
                <p><em>Purpose:</em> Use the relative proportion of interictal spikes in the left and right hemispheres to predict the side (left or right) of the seizure onset zone in patients with temporal lobe epilepsy undergoing scalp EEG. </p>
            </div>
        </div>
        
        <div class="row top-buffer">
            <div class="col-md"> 
                <p><em>Instructions for use:</em> Choose scalp EEG data in wake and sleep. Count (using an automated spike detector, SpikeNet2 or Persyst) the number of spikes in the left and right hemisphere contacts. Input these values in the calculator. The units (spikes/minute or spikes/hour, etc.) do not matter in the calculation.</p>
            </div>
        </div>

        <div class="row top-buffer">
            <div class="col-md"> 
                <p><em>Interpretation of results</em></p>
                <p>The equation for spike asymmetry index (<em>SAI</em>) is:</p>
                <p>   
                    \[\frac{Spikes_{Left} - Spikes_{Right}}{Spikes_{Left} + Spikes_{Right}}\]
                </p>
            </div>
        </div>

        <div class="row top-buffer">
            <div class="col-md"> 
            <p> Where <em>Spikes<sub>Left</sub></em> is the number of spikes in the left hemisphere, and <em>Spikes<sub>Right</sub></em> is the number of spikes in the right hemisphere. <em>SAI</em> ranges between -1 and 1. A positive <em>SAI</em> implies more spikes on the left, a negative <em>AI</em> implies more spikes on the right, and an <em>SAI</em> of zero implies an equal number of spikes in the left and right hemispheres. We performed bootstrapping on our data and we used 1000 model coefficients for each model to generate 95% confidence intervals.  </p>
            <p>The formula for Model 1 (predicting the probability of left-sided seizure onset zone) is:</p>
            <p>\[Probabililty_{Left} = \frac{1}{1+exp(-coef_{1} - SAI \times coef_{2})}\]</p>
            <p>The formula for Model 2 (predicting the probability of right-sided seizure onset zone) is:</p>
            <p>\[Probabililty_{Right} = \frac{1}{1+exp(-coef_{3} - SAI \times coef_{4})}\]</p>
            </div>
        </div>
        <div class="row top-buffer">
            <div class="col-md"> 
                <p> These probabilities are the outputs of two separate logistic regression models trained on data from patients at the Hospital of the University of Pennsylvania. The models separately predict the probabilities of left- and right-sided seizure onset zones.</p>
            </div>
        </div>
        <div class="row top-buffer">
            <div class="col-md"> 
                <p><em>Accuracy of the results:</em></p>
                <!-- THIS REFERS TO LOOCV -->
                <p>When the models were tested on a distinct cohort of patients from the Hospital of the University of Pennsylvania, the performance of the two models was:</p>
                <p>Model 1: AUC = 0.78 (95% CI 0.69-0.87), accuracy = 70.0%</p>
                <p>Model 2: AUC = 0.80 (95% CI 0.70-0.88), accuracy = 75.0%</p>
            </div>
        <div class="row top-buffer">
            <div class="col-md">
	      <!--
                <p>References</p>
	      //-->
            </div>
        </div>
        
        </div>
    </div>
        
                                          
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="../../assets/js/vendor/popper.min.js"></script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <script src="coefs.js"></script>

    <script>
        // Find the confidence interval for a asymmetry index
        // this assuemes we have the list of 1000 paramaters
        function findCI(AI, coef_list) {
            let probs = [];

            for (let coef of coef_list) {
                let singleProb = 1 / (1 + Math.exp(-coef[0] - (coef[1] * AI)));
                probs.push(singleProb);
            }

            // 95% confidence interval, get the 97.5th percentile and 2.5th percentile value values
            probs.sort()
            return [probs[24], probs[974]];
        }

        function myFunction() {

            // [const_left, sai_coeff_left, const_right, sai_coeff_right]
            var coef = [-0.0098, 3.2208, -0.5571, -3.8549];
            // Calculate the probability using the logistic regression formula
            var AI = ( Number(document.getElementById("LSR").value) - Number(document.getElementById("RSR").value) ) / ( Number(document.getElementById("LSR").value) + Number(document.getElementById("RSR").value) );
            
            // left vs rest
            let leftProb = 1 / (1 + Math.exp(-coef[0] - (coef[1] * AI)));
            // right vs rest  
            let rightProb = 1 / (1 + Math.exp(-coef[2] - (coef[3] * AI)));

            // Find the confidence interval
            // Using method described in the email
            let leftCI = findCI(AI, coef_lists["left_vs_rest"]);
            let rightCI = findCI(AI, coef_lists["right_vs_rest"]);

            // Properly format the results to be presentable
            leftCI[0] = ((leftCI[0] * 100).toPrecision(3)).toString() + "%";
            leftCI[1] = ((leftCI[1] * 100).toPrecision(3)).toString() + "%";
            rightCI[0] = ((rightCI[0] * 100).toPrecision(3)).toString() + "%";
            rightCI[1] = ((rightCI[1] * 100).toPrecision(3)).toString() + "%";

            leftProb = leftProb * 100;
            leftProb = leftProb.toPrecision(3);
            leftProb = leftProb.toString();
            leftProb = leftProb + "%";
            
            rightProb = rightProb * 100;
            rightProb = rightProb.toPrecision(3);
            rightProb = rightProb.toString();
            rightProb = rightProb + "%";

            AI = AI.toPrecision(2);
            AI = AI.toString();
            let leftOutput = `${leftProb} (95% CI: ${leftCI[0]} - ${leftCI[1]})`;
            let rightOutput = `${rightProb} (95% CI: ${rightCI[0]} - ${rightCI[1]})`;

            document.getElementById("demo_right").innerHTML = rightOutput;
            document.getElementById("demo_left").innerHTML = leftOutput;
            document.getElementById("ai").innerHTML = AI;
        }
    </script>
                    
                    
                    
